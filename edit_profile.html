<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
    <meta name="format-detection" content="telephone=no" />
    <meta name="msapplication-tap-highlight" content="no" />
    <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width" />
    <!-- This is a wide open CSP declaration. To lock this down for production, see below. -->
    <meta http-equiv="Content-Security-Policy" content="default-src * 'unsafe-inline'; style-src 'self' 'unsafe-inline'; media-src *" />
    <!-- Good default declaration:
    * gap: is required only on iOS (when using UIWebView) and is needed for JS->native communication
    * https://ssl.gstatic.com is required only on Android and is needed for TalkBack to function properly
    * Disables use of eval() and inline scripts in order to mitigate risk of XSS vulnerabilities. To change this:
        * Enable inline JS: add 'unsafe-inline' to default-src
        * Enable eval(): add 'unsafe-eval' to default-src
    * Create your own at http://cspisawesome.com
    -->
    <!-- <meta http-equiv="Content-Security-Policy" content="default-src 'self' data: gap: 'unsafe-inline' https://ssl.gstatic.com; style-src 'self' 'unsafe-inline'; media-src *" /> -->
        <link rel="stylesheet" type="text/css" href="css/main.css"/>
        <link rel="stylesheet" type="text/css" href="css/materialize.min.css"/>
        <link rel="stylesheet" type="text/css" href="css/font-awesome.min.css"/>
        <style>
            .card {box-shadow:none;-webkit-box-shadow:none;-moz-box-shadow:none;}
            .card-panel{box-shadow:none;-webkit-box-shadow:none;-moz-box-shadow:none;}
        </style>
        
        <title>Hello World</title>

    </head>
    <body class="blue-grey lighten-4">
        <div class="navbar-fixed">
    <nav class="blue-grey darken-3">
    <div class="nav-wrapper">
      <a href="#" class="brand-logo">Edit Profile</a>
        <ul class="left"><a href="settings.html" data-activates="slide-out" class="button-collapse"><i class="fa fa-angle-left"></i></a></ul>
      
    </div>
  </nav>
    </div>
        
        
        <div style="width:90%; height:auto;margin:auto;">
            
            <div class="card-panel" style="width:100%;">
            <div style="width:;margin-left:;margin-right:;text-align:;">
               <form method="post" class="white">
                    <div class="input-field" class="white">
                        <input style="border: 2px solid #e0e0e0;border-radius:5px;" style="50px" id="uname" type="text" placeholder="Edit username">
                    </div>
                    <button type="button" value="create" class="btn waves-effect waves-light blue-grey"  id="a">Edit</button>
                </form>
        </div>
        </div>
            
            <div class="card-panel" style="width:100%;">
            <div style="width:;margin-left:;margin-right:;text-align:;">
               <form method="post" class="white">
                    <div class="input-field" class="white">
                        <input style="border: 2px solid #e0e0e0;border-radius:5px;" style="50px"id="email" type="text" placeholder="Edit Email">
                    </div>
                    <button type="button" value="create" class="btn waves-effect waves-light blue-grey"  id="b">Edit</button>
                </form>
        </div>
        </div>
            <div class="card-panel" style="width:100%;">
            <div style="width:;margin-left:;margin-right:;text-align:;">
               <form method="post" class="white">
                    <div class="input-field" class="white">
                        <input style="border: 2px solid #e0e0e0;border-radius:5px;" style="50px"id="pword1" type="text" placeholder="Old password">
                        <input style="border: 2px solid #e0e0e0;border-radius:5px;" style="50px"id="pword2" type="text" placeholder="New password">
                    </div>
                    <button type="button" value="create" class="btn waves-effect waves-light blue-grey"  id="c">Edit</button>
                </form>
        </div>
        </div>
           <!-- <div class="card-panel" style="width:100%;">
            <div style="width:;margin-left:;margin-right:;text-align:;">
               <form method="post" class="white">
                    <div class="input-field col s12">
                                        <select id="country">
                                            <option value="" disabled selected>Change your country</option>
                                            <option value="male" >Nigeria</option>
                                        </select>
                                    </div>
                    <button type="button" value="create" class="btn waves-effect waves-light blue-grey"  id="d">Edit</button>
                </form>
        </div>
        </div>-->
            
        </div>
        
        <script src="js/jquery-3.2.1.min.js"></script>
        <script src="js/materialize.min.js"></script>
        <script>
            $(document).ready(function(){
                 $('select').material_select();
                
                $("#a").click(function(){
                 var uname = $("#uname").val();
                  if (uname != "" ) {
                      
                      $.ajax({
                          
                         type: 'post',
                          url: 'http://gothere.000webhostapp.com/check.php',
                         //url: 'check.php',
                         data: {
                            username: uname,
                             
                         },
                          success:function(response) {
                              if (response == "success") {
                      
                      $.ajax({
                          
                         type: 'post',
                          url: 'http://gothere.000webhostapp.com/update_username.php',
                         data: {uname:uname},
                          success:function(response) {
                              
                              if (response == "success") {
                                  Materialize.toast("Profile updated", 10000);
                              }
                              else {
                                   Materialize.toast("Profile not updated", 10000);
                              }
                              
                          }
                          
                      });
                      
                }
                   else {
                       Materialize.toast("Username already exists", 10000);
                   }
                          }
                   
               });
                        
                          
                       }else {Materialize.toast('Input a username!', 4000);}
                          
            
            });
                
                $("#b").click(function(){
                 var email = $("#email").val();
                  if (email != "" ) {
                      
                      $.ajax({
                          
                         type: 'post',
                          url: 'http://gothere.000webhostapp.com/check_email.php',
                         //url: 'check.php',
                         data: {
                            email: email,
                             
                         },
                          success:function(response) {
                              if (response == "success") {
                      
                      $.ajax({
                          
                         type: 'post',
                          url: 'http://gothere.000webhostapp.com/update_email.php',
                         data: {uname:uname},
                          success:function(response) {
                              
                              if (response == "success") {
                                  Materialize.toast("Profile updated", 10000);
                              }
                              else {
                                   Materialize.toast("Profile not updated", 10000);
                              }
                              
                          }
                          
                      });
                      
                }
                   else {
                       Materialize.toast("Email already exists", 10000);
                   }
                          }
                   
               });
                        
                          
                       }else {Materialize.toast('Input an Email!', 4000);}
                          
            
            });
                $("#c").click(function(){
                 var pword1 = $("#pword1").val();
                 var pword2 = $("#pword2").val();
                  if (pword1 != "" && pword2 != "" ) {
                      
                      $.ajax({
                          
                         type: 'post',
                          url: 'http://gothere.000webhostapp.com/check_oldpassword.php',
                         data: {
                            pword1: pword1,
                             
                         },
                          success:function(response) {
                              if (response == "success") {
                      
                      $.ajax({
                          
                         type: 'post',
                          url: 'http://gothere.000webhostapp.com/update_email.php',
                         data: {pword2:pword2},
                          success:function(response) {
                              
                              if (response == "success") {
                                  Materialize.toast("Password updated", 10000);
                              }
                              else {
                                   Materialize.toast("Password not updated", 10000);
                              }
                              
                          }
                          
                      });
                      
                }
                   else {
                       Materialize.toast("Old email not the same", 10000);
                   }
                          }
                   
               });
                        
                          
                       }else {Materialize.toast('Input your old and new passwords!', 4000);}
                          
            
            });
            });
            
            
        // }else {Materialize.toast('Select a new name!', 4000);}
          //                }
        </script>
        
 
        
    </body>
</html>