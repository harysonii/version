<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="format-detection" content="telephone=no" />
        <meta name="msapplication-tap-highlight" content="no" />
        <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width" />
        <!-- This is a wide open CSP declaration. To lock this down for production, see below. -->
        <meta http-equiv="Content-Security-Policy" content="default-src * 'unsafe-inline'; style-src 'self' 'unsafe-inline'; media-src *" />
        <!-- Good default declaration:
        * gap: is required only on iOS (when using UIWebView) and is needed for JS->native communication
        * https://ssl.gstatic.com is required only on Android and is needed for TalkBack to function properly
        * Disables use of eval() and inline scripts in order to mitigate risk of XSS vulnerabilities. To change this:
        * Enable inline JS: add 'unsafe-inline' to default-src
        * Enable eval(): add 'unsafe-eval' to default-src
        * Create your own at http://cspisawesome.com
        -->
        <!-- <meta http-equiv="Content-Security-Policy" content="default-src 'self' data: gap: 'unsafe-inline' https://ssl.gstatic.com; style-src 'self' 'unsafe-inline'; media-src *" /> -->

        <link rel="stylesheet" type="text/css" href="css/main.css"/>
        <link rel="stylesheet" type="text/css" href="css/signup.css"/>
        <link rel="stylesheet" type="text/css" href="css/materialize.min.css"/>
        <link rel="stylesheet" type="text/css" href="css/font-awesome.min.css"/>
        <title>Hello World</title>
    </head>
    <body class="teal">
        <div class="logo">
            <div class="logo2">
                 <img src="icon.png" width="80px" height="80px"/>
            </div>
        </div>
            <div class="ui form">
                <form method="post">
                    <div class="form2">
                                   <div class="col s6">
                        <div class="row">
                            <div class="input-field col s6">
                                <input style="border: 2px solid #e0e0e0;border-radius:5px;" type="text" class="" id="fname" placeholder="Firstname" name="">
                            </div>
                            <div class="input-field col s6">
                                <input style="border: 2px solid #e0e0e0;border-radius:5px;" type="text" class="" id="sname" placeholder="Surname" name="">
                            </div>
                        </div>
                    </div>
                                    <input type="text" placeholder="Username" id="username" size="45"><br/>
                                    
                                    <input type="email" placeholder="E-mail" id="unique" size="45"><br/>
                                    
                                    <input type="password" placeholder="Password" id="secret" size="45"><br/>
                                   
                        <div class="col s6">
                        <div class="row">
                            <div class="input-field col s6">
                                        <select id="gender">
                                            <option value="" disabled selected>Choose your gender</option>
                                            <option value="male" >Male</option>
                                            <option value="female" >Female</option>
                                        </select>
                                    </div><div class="input-field col s6">
                                        <select id="country">
                                            <option value="" disabled selected>Choose your gender</option>
                                            <option value="Nigeria" >Nigeria</option>
                                        </select>
                                    </div>

                        </div>
                    </div>
            
                    
                                     <div class="ui checkbox">
      <input type="checkbox" name="chk[]" id="test1">
      <label for="test1">I agree to the Terms and Conditions</label>
    </div>
                        <input type="button" class="waves-effect btn" value="Sign up!" id="signup"/>
                    </div>
                 </form>

            </div>
        <div class="signup">
            
                    <p style="text-align:center;">Not your first time? <a href="login.html">Sign up</a></p>
                        
        </div>
        <script src="js/jquery-3.2.1.min.js"></script>
        <script src="js/materialize.min.js"></script>
        
        <script>
        
            $(document).ready(function(){
                $('select').material_select();
                
                $("#signup").click(function(){
                   
                    var fname = $("#fname").val();
                    var sname = $("#sname").val();
                  var username = $("#username").val();
                  var email = $("#unique").val();
                  var password = $("#secret").val();
                  var gender = $("#gender").val();
                  var country = $("#country").val();
                  var chk = $("#test1:checked").length > 0;
                  var re = /^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
                    if (fname != "" && sname != "" && username != "" && email != "" && password != "" && gender != "" && country != "") {
                  if (chk > 0) {
                  if (email.match(re)) {
                      $.ajax({
                          
                         type: 'post',
                          url: 'http://gothere.000webhostapp.com/check.php',
                        // url: 'check.php',
                         data: {username: username},
                          success:function(response) {
                              if (response == "success"){ 
                                $.ajax({
                         type: 'post',
                          url: 'http://gothere.000webhostapp.com/check_email.php',
                        // url: 'check_email.php',
                         data: {email: email },
                          success:function(response) {
                              if (response == "email") {
                                  $.ajax({
                         type: 'post',
                          url: 'http://gothere.000webhostapp.com/signup.php',
                         //url: 'signup.php',
                         url: 'signup.php',
                         data: {
                             
                             fname: fname,
                             sname: sname,
                             username: username,
                             email: email,
                             password: password,
                             gender: gender,
                             country: country
                             
                         },
                          success:function(response) {
                              
                              if (response == "success") {
                                      
                                  window.location.href="profile.html";
        
                              }
                              else {
                                  Materialize.toast('Sign up unsuccessful!', 4000);
                              }
                              
                          }
                          
                      });
                                  
                              }else {Materialize.toast('Email already exists!', 4000);}
                              }
                      });
                              }else {Materialize.toast('Username already exists!', 4000);}
                              }
                      });
                      
                      }else{Materialize.toast('Input a valid email address!', 4000); }
                      }else{Materialize.toast('Agree to the Terms and conditions!', 4000); }
                  }else {Materialize.toast('Fill all fields!', 4000);}
                    
                    
                });
                
                 });
        
        
        </script>
    </body>
</html>